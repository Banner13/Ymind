[TOC]

# STM32F103的启动过程
## 运行系统固件
	上电时先运行STM32bootload，根据BOOT0和BOOT1的配置，选择不同的boot模式。
    1. 烧录模式。
    2. FLASH启动。
    3. RAM启动。

## 启动过程
### 设置栈顶
	sp = 固件的前四个字节。

### 跳转到入口函数
	固件的第五-第八字节应该存放用户的入口函数。通常存放复位处理函数(Reset_handle)。

### 在入口函数或复位函数中重定向数据段
	为了保持每次启动或者复位时的程序状态一致，那么固件中的数据段就不能在程序运行中被改变。
    所以需要将FLASH中的数据段拷贝到其他区域，以供程序运行时使用。
    STM32的启动文件中，将以上数据Copy到了RAM区域。

### 跳转到用户函数
	初始化数据后，便可跳转到用户定义的函数中。通常是main函数。而STM32的启动文件，在跳转到main函数之前，先调用了System_Init函数。